<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="utf-8" />
	<title>BDG 3D</title>

	<!--[if IE]>
  <script src="http://html5shiv.googlecode.com/svn/trunk/html5.js"></script><![endif]-->

  <link rel="stylesheet" href="http://cdnjs.cloudflare.com/ajax/libs/leaflet/0.7.3/leaflet.css" />
  <script src="http://cdnjs.cloudflare.com/ajax/libs/leaflet/0.7.3/leaflet.js"></script>
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.3/jquery.min.js"></script>

  <style type="text/css">
  	#map {
  		position: absolute;
  		left: 0;
  		top: 0;
  		width: 100%;
  		height: 100%;
  	}
  </style>
</head>
<body>
	<div id="map"></div>
	<script type="text/javascript">
		var map = L.map('map').setView([-19.8157,-43.9542], 8);
		L.tileLayer('https://{s}.tiles.mapbox.com/v4/mapbox.streets/{z}/{x}/{y}.png?access_token=pk.eyJ1IjoiZmVsaXBlLWJyYW5jbyIsImEiOiIwYmE2ODQ5MTg3OWIzNTczNDNiNGEzMzIwOTU4MDlkYyJ9.YpFLghLNfjNKS1xxq8Z4ag',
		{
	    attribution: 'Map data &copy; <a href="http://openstreetmap.org">OpenStreetMap</a> contributors, <a href="http://creativecommons.org/licenses/by-sa/2.0/">CC-BY-SA</a>, Imagery Â© <a href="http://mapbox.com">Mapbox</a>',
	    maxZoom: 18
		}).addTo(map);

		$.ajax({
      url: 'json.php',
      dataType: 'json',
      complete: function() {
        console.log('complete');
      },
      success: function(json) {
      	$.each(json, function(i, obj) {
      		var pointList = [];
      		$.each(obj, function(i2, obj2) {
      			pointList.push(new L.LatLng(obj2[0],obj2[1],obj2[2]));
      		});
      		console.log(pointList);
      		var firstpolyline = new L.Polygon(pointList, {
						color: 'red',
						fillColor: '#f03',
						opacity: 0.9
					});
					map.addLayer(firstpolyline);
      	});
      }
    });
	</script>
</body>
</html>